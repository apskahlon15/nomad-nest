<% layout('/layouts/boilerplate') %>

<div class="container my-5">
  <h2 class="mb-4">Search Results for: "<%= query %>"</h2>

  <% if (results && results.length > 0) { %>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4">
    <% results.forEach(function(item, index) { %>
    <div class="col">
      <div class="card h-100">
        <% if (item.image && item.image.url) { %>
        <img
          src="<%= item.image.url %>"
          class="card-img-top"
          alt="<%= item.title %>"
          style="height: 150px; object-fit: cover"
        />
        <% } %>
        <div class="card-body d-flex flex-column">
          <h5 class="card-title mb-0">
            <%= index + 1 %>.
            <a
              href="/listings/<%= item._id %>"
              class="stretched-link text-decoration-none text-dark"
            >
              <%= item.title %>
            </a>
          </h5>
        </div>
      </div>
    </div>
    <% }) %>
  </div>
  <% } else { %>
  <p>
    No results found for "<%= query %>". Please try a different search term.
  </p>
  <% } %>
</div>
